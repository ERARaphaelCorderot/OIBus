"use strict";(self.webpackChunkdoc_oibus=self.webpackChunkdoc_oibus||[]).push([[6111],{8135:(e,n,t)=>{t.d(n,{ZP:()=>o});var i=t(5893),s=t(1151);function r(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"csv-serialization",children:"CSV Serialization"}),"\n",(0,i.jsx)(n.p,{children:"OIBus offers the option to serialize retrieved data into CSV files, and you can customize the serialization process with\nthe following settings:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Filename"}),": The name of the file where the result will be stored. You can use several internal variables like\n",(0,i.jsx)(n.strong,{children:"@ConnectorName"})," (the name of the connector) and ",(0,i.jsx)(n.strong,{children:"@CurrentDate"})," (the current date in ",(0,i.jsx)(n.code,{children:"yyyy_MM_dd_HH_mm_ss_SSS"})," format)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Delimiter"}),": The delimiter to use in the CSV."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compression"}),": Choose whether to compress the file with gzip or not."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Output datetime format"}),": Specify the format of the datetime in the CSV. OIBus will only convert the\n",(0,i.jsx)(n.a,{href:"#datetime-fields",children:"datetime fields"})," specified."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Output timezone"}),": The timezone to use for storing the datetime."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"splitting-large-queries",children:"Splitting large queries"}),"\n",(0,i.jsxs)(n.p,{children:["In situations where a query may impose a significant load on the server, especially when a large time interval is requested\nand the @StartTime and @EndTime ",(0,i.jsx)(n.a,{href:"#query-variables",children:"query variables"})," are utilized, you can split the query into several\nsub-queries with smaller intervals. This can be achieved by configuring the ",(0,i.jsx)(n.strong,{children:"Max read interval"})," field in the\n",(0,i.jsx)(n.a,{href:"/zh/docs/guide/south-connectors/common-settings#history-settings",children:"history settings"}),"."]})]})}function o(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}},9117:(e,n,t)=>{t.d(n,{ZP:()=>l});var i=t(5893),s=t(1151),r=t(8135);function o(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"item-settings",children:"Item settings"}),"\n",(0,i.jsx)(n.p,{children:"In the South connector, each item can be configured to be queried according to the chosen scan mode. Multiple queries to\nthe same database can be configured within the same South connector. OIBus will execute the queries one after another,\nprepare the output file, and then send it to North connectors."}),"\n",(0,i.jsx)(n.h3,{id:"query",children:"Query"}),"\n",(0,i.jsxs)(n.p,{children:["The query field in the South connector accepts SQL syntax and can utilize several internal variables. These variables\nserve various purposes, including enhancing data stream resilience in the event of a connection failure and breaking\ndown large intervals into smaller chunks, which helps reduce the load on the server and network. For more information,\nrefer to the ",(0,i.jsx)(n.a,{href:"#splitting-large-queries",children:"big queries"})," section."]}),"\n",(0,i.jsx)(n.h4,{id:"query-variables",children:"Query variables"}),"\n",(0,i.jsx)(n.p,{children:"In OIBus, you can utilize the following internal variables that will be interpreted by the system:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"@StartTime"}),": Initially, the @StartTime variable is set to the date of the first execution of the query. When results\nare retrieved from the database, the @StartTime value is updated to the most recent timestamp among those results in the\nfield used as a reference (refer to ",(0,i.jsx)(n.a,{href:"#datetime-fields",children:"the datetime fields section"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"@EndTime"}),": The @EndTime variable is set to either the current time (",(0,i.jsx)(n.em,{children:"now()"}),") or the end of the sub-interval if a\nquery is split."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",metastring:'title="SQL query with @StartTime and @EndTime"',children:"SELECT reference, value, timestamp FROM table WHERE timestamp > @StartTime AND timestamp < @EndTime\n"})}),"\n",(0,i.jsx)(n.h3,{id:"datetime-fields",children:"Datetime fields"}),"\n",(0,i.jsx)(n.p,{children:"In the South connector, you can specify an array of fields that are of datetime type and indicate the format to use for\neach field. Here are the details for configuring datetime fields:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Field name"}),": The field name in the SELECT section of the query."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reference field"}),": Use this field as a reference for the next @StartTime value (refer to ",(0,i.jsx)(n.a,{href:"#query-variables",children:"query variables"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type"}),": The type of data in the result."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Timezone"})," (for string, Date, DateTime, DateTime2, SmallDateTime types): The timezone of the datetime stored in the\ndatabase."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Format"})," (for string only): The string format of the datetime stored in the database."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Locale"})," (for string only): The locale to use when the format contains locale-specific strings (such as MMM format\nfor months)."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["OIBus internally uses these dates in ISO UTC format, and the output datetime format can be set in the\n",(0,i.jsx)(n.a,{href:"#serialization",children:"serialization section"}),"."]}),"\n",(0,i.jsx)(r.ZP,{})]})}function l(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},4454:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var i=t(5893),s=t(1151),r=t(9117);const o={sidebar_position:14},l="ODBC",a={id:"guide/south-connectors/odbc",title:"ODBC",description:"\u5411\u672c\u5730 ODBC \u9a71\u52a8\u7a0b\u5e8f\u6216\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u540c\u4e00\u673a\u5668\u4e0a\u7ba1\u7406 ODBC \u67e5\u8be2\u7684\u8fdc\u7a0b OIBus Agent \u53d1\u9001 SQL \u67e5\u8be2\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/guide/south-connectors/odbc.mdx",sourceDirName:"guide/south-connectors",slug:"/guide/south-connectors/odbc",permalink:"/zh/docs/guide/south-connectors/odbc",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:14,frontMatter:{sidebar_position:14},sidebar:"guideSidebar",previous:{title:"OIAnalytics (Rest API)",permalink:"/zh/docs/guide/south-connectors/oianalytics"},next:{title:"\u5386\u53f2\u67e5\u8be2",permalink:"/zh/docs/guide/history-queries"}},c={},d=[{value:"\u7279\u5b9a\u8bbe\u7f6e",id:"\u7279\u5b9a\u8bbe\u7f6e",level:2},{value:"\u9a71\u52a8\u7a0b\u5e8f\u5b89\u88c5",id:"\u9a71\u52a8\u7a0b\u5e8f\u5b89\u88c5",level:3},{value:"\u4e0e IP21 \u4f7f\u7528 OIBus",id:"\u4e0e-ip21-\u4f7f\u7528-oibus",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"odbc",children:"ODBC"}),"\n",(0,i.jsxs)(n.p,{children:["\u5411\u672c\u5730 ODBC \u9a71\u52a8\u7a0b\u5e8f\u6216\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u540c\u4e00\u673a\u5668\u4e0a\u7ba1\u7406 ODBC \u67e5\u8be2\u7684\u8fdc\u7a0b ",(0,i.jsx)(n.a,{href:"/zh/docs/guide/oibus-agent/odbc",children:"OIBus Agent"})," \u53d1\u9001 SQL \u67e5\u8be2\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["OIBus agent \u53ef\u4ee5\u6839\u636e\u5176",(0,i.jsx)(n.a,{href:"../oibus-agent/installation",children:"\u6587\u6863"}),"\u4e2d\u7684\u8bf4\u660e\u5355\u72ec\u5b89\u88c5\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u9700\u8981\u4ece IP21 ODBC \u63a5\u53e3\u6216\u5176\u4ed6 ODBC \u517c\u5bb9\u5e94\u7528\u7a0b\u5e8f\u68c0\u7d22\u6570\u636e\u65f6\uff0c\u6b64\u8fde\u63a5\u5668\u975e\u5e38\u6709\u4ef7\u503c\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u7279\u5b9a\u8bbe\u7f6e",children:"\u7279\u5b9a\u8bbe\u7f6e"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4f7f\u7528\u8fdc\u7a0b\u4ee3\u7406"}),"\uff1a\u5982\u679c\u8bbe\u7f6e\u4e3a ",(0,i.jsx)(n.code,{children:"No"}),"\uff0c\u786e\u4fdd\u5728\u90e8\u7f72 OIBus \u7684\u673a\u5668\u4e0a\u5b89\u88c5\u4e86 ODBC ",(0,i.jsx)(n.a,{href:"#driver-installation",children:"\u9a71\u52a8\u7a0b\u5e8f"}),"\u3002\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u5728\u914d\u5907\u5fc5\u8981\u9a71\u52a8\u7a0b\u5e8f\u7684\u8fdc\u7a0b\u673a\u5668\u4e0a",(0,i.jsx)(n.a,{href:"../oibus-agent/installation",children:"\u5b89\u88c5 OIBus agent"}),"\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8fdc\u7a0b\u4ee3\u7406 URL"}),"\uff1a\u6307\u5b9a\u8fdc\u7a0b OIBus agent \u7684 URL\uff0c\u4f8b\u5982\uff0c",(0,i.jsx)(n.a,{href:"http://ip-address-or-host:2224%E3%80%82",children:"http://ip-address-or-host:2224\u3002"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u91cd\u8bd5\u95f4\u9694"}),"\uff1a\u5728\u91cd\u65b0\u5c1d\u8bd5\u8fde\u63a5\u524d\u7684\u7b49\u5f85\u65f6\u95f4\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8bf7\u6c42\u8d85\u65f6"}),"\uff1a\u786e\u5b9a\u6bcf\u4e2a\u67e5\u8be2\u7684\u8d85\u65f6\u6301\u7eed\u65f6\u95f4\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8fde\u63a5\u5b57\u7b26\u4e32"}),"\uff1aODBC \u8fde\u63a5\u5b57\u7b26\u4e32\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5bc6\u7801"}),"\uff1a\u8ba4\u8bc1\u5bc6\u7801\uff0c\u5728 OIBus \u914d\u7f6e\u4e2d\u5b89\u5168\u5b58\u50a8\u3002\u5982\u679c\u76f4\u63a5\u5305\u542b\u5728\u8fde\u63a5\u5b57\u7b26\u4e32\u4e2d\uff0c\u5bc6\u7801\u5c06\u4ee5\u660e\u6587\u5b58\u50a8\u3002\u5f53\u4f7f\u7528\u5bc6\u7801\u65f6\uff0cOIBus \u4f1a\u5728\u8fde\u63a5\u5b57\u7b26\u4e32\u7684\u672b\u5c3e\u9644\u52a0 ",(0,i.jsx)(n.code,{children:"PWD=<password>"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u8bf7\u786e\u4fdd ODBC \u8fde\u63a5\u5b57\u7b26\u4e32\u7b26\u5408\u6307\u5b9a\u9a71\u52a8\u7a0b\u5e8f\u7684\u683c\u5f0f\uff0c\u5e76\u4e14\u8fde\u63a5\u5b57\u7b26\u4e32\u4e2d\u6307\u5b9a\u7684\u9a71\u52a8\u7a0b\u5e8f\u6b63\u786e\u5b89\u88c5\u3002"}),"\n",(0,i.jsxs)(n.admonition,{title:"ODBC \u8fde\u63a5\u5b57\u7b26\u4e32\u793a\u4f8b",type:"tip",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Driver={\u9a71\u52a8\u7a0b\u5e8f\u540d\u79f0};SERVER=localhost,10014;TrustServerCertificate=yes;Database=test;UID=oibus;PWD=<secret>"})}),(0,i.jsxs)(n.p,{children:["\u9a71\u52a8\u7a0b\u5e8f\u662f\u9a71\u52a8\u7a0b\u5e8f\u7684\u540d\u79f0\uff08Windows\uff09\u6216\u9a71\u52a8\u7a0b\u5e8f\u6587\u4ef6\u7684\u8def\u5f84\uff08\u7c7b Unix \u7cfb\u7edf\uff09\u3002\n\u7aef\u53e3\u662f\u53ef\u9009\u7684\uff0c\u53ef\u4ee5\u7528 ",(0,i.jsx)(n.code,{children:"PORT=10014"})," \u66ff\u6362\uff08\u786e\u4fdd\u5c06\u9017\u53f7 ",(0,i.jsx)(n.code,{children:","})," \u66ff\u6362\u4e3a\u5206\u53f7 ",(0,i.jsx)(n.code,{children:";"}),"\uff09\u3002"]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u9a71\u52a8\u7a0b\u5e8f\u5b89\u88c5",children:"\u9a71\u52a8\u7a0b\u5e8f\u5b89\u88c5"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728 Windows \u4e0a\uff0c\u60a8\u53ef\u4ee5\u65b9\u4fbf\u5730\u8bbf\u95ee ODBC \u9a71\u52a8\u7a0b\u5e8f\u7ba1\u7406\u5de5\u5177\uff0c\u5728\u90a3\u91cc\u60a8\u53ef\u4ee5\u5728\u8fde\u63a5\u5b57\u7b26\u4e32\u4e2d\u6307\u5b9a\u9a71\u52a8\u7a0b\u5e8f\u7684\u540d\u79f0\uff0c\u4f8b\u5982 ",(0,i.jsx)(n.code,{children:"MySQL ODBC 3.51 \u9a71\u52a8\u7a0b\u5e8f"})," \u6216 ",(0,i.jsx)(n.code,{children:"SQL Server"}),"\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u7c7b UNIX \u7cfb\u7edf\u4e0a\uff0c\u60a8\u5e94\u8be5\u5148\u5728\u60a8\u7684\u673a\u5668\u4e0a\u5b89\u88c5\u9a71\u52a8\u7a0b\u5e8f\uff0c\u7136\u540e\u5728\u8fde\u63a5\u5b57\u7b26\u4e32\u4e2d\u6307\u5b9a\u9a71\u52a8\u7a0b\u5e8f\u7684\u8def\u5f84\uff0c\u4f8b\u5982 ",(0,i.jsx)(n.code,{children:"/opt/lib/libmsodbcsql.18.dylib"}),"\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u4e0e-ip21-\u4f7f\u7528-oibus",children:"\u4e0e IP21 \u4f7f\u7528 OIBus"}),"\n",(0,i.jsx)(n.p,{children:"ODBC \u8fde\u63a5\u901a\u5e38\u4f1a\u9047\u5230\u5ef6\u8fdf\u95ee\u9898\uff0c\u7279\u522b\u662f\u5728\u5927\u578b\u5386\u53f2\u67e5\u8be2\u671f\u95f4\uff0c\u4f8b\u5982\u6d89\u53ca IP21 \u7684\u67e5\u8be2\u3002\u8fd9\u53ef\u80fd\u4f1a\u5bf9\u7f51\u7edc\u548c\u670d\u52a1\u5668\u9020\u6210\u91cd\u5927\u8d1f\u8f7d\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4e3a\u4e86\u51cf\u8f7b\u8fd9\u4e9b\u6311\u6218\uff0c\u6211\u4eec\u5efa\u8bae\u5c06 OIBus Agent \u4f5c\u4e3a\u670d\u52a1\u5b89\u88c5\u5728\u4e0e IP21 \u76f8\u540c\u7684\u673a\u5668\u4e0a\u3002OIBus \u7136\u540e\u53ef\u4ee5\u4f7f\u7528 HTTP \u534f\u8bae\u5c06\u67e5\u8be2\u4f20\u8f93\u7ed9\u5176\u4ee3\u7406\uff0c\u4ee3\u7406\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ODBC \u4e0e IP21 \u901a\u4fe1\uff0c\u6d88\u9664\u7f51\u7edc\u5ef6\u8fdf\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u5f53\u7136\uff0c\u5fc5\u987b\u786e\u4fdd\u5728 ",(0,i.jsx)(n.strong,{children:"\u4ee3\u7406\u673a\u5668\u4e0a"})," \u5b89\u88c5\u4e86\u9002\u5408\u7684 ODBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u5e76\u5728\u8fde\u63a5\u5b57\u7b26\u4e32\u4e2d\u6b63\u786e\u6307\u5b9a\u3002"]}),"\n",(0,i.jsx)(n.admonition,{title:"IP21 ODBC \u9a71\u52a8\u7a0b\u5e8f",type:"tip",children:(0,i.jsxs)(n.p,{children:["\u8981\u901a\u8fc7 ODBC \u5efa\u7acb\u4e0e IP21 \u7684\u8fde\u63a5\uff0c\u60a8\u9700\u8981\u5728\u60a8\u7684\u673a\u5668\u4e0a\u5b89\u88c5 ",(0,i.jsx)(n.code,{children:"AspenTech SQLplus"})," \u9a71\u52a8\u7a0b\u5e8f\u3002\n\u8bf7\u786e\u4fdd\u6b64\u9a71\u52a8\u7a0b\u5e8f\u6b63\u786e\u5b89\u88c5\u3002"]})}),"\n",(0,i.jsx)(n.admonition,{title:"ODBC \u8bbf\u95ee",type:"caution",children:(0,i.jsx)(n.p,{children:"\u8ba4\u8bc1\u53ef\u4ee5\u901a\u8fc7\u8fde\u63a5\u5b57\u7b26\u4e32\u6216\u672c\u5730\u5904\u7406\u3002\u5728\u9009\u62e9\u672c\u5730\u8ba4\u8bc1\u65f6\uff0c\u91cd\u8981\u7684\u662f\u786e\u4fdd OIBus agent \u4ee5\u9002\u5f53\u7684\u6743\u9650\u8fd0\u884c\u3002\u60a8\u53ef\u80fd\u9700\u8981\u4ee5\u4e0d\u540c\u7528\u6237\u8eab\u4efd\u8fd0\u884c\u670d\u52a1\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u670d\u52a1\u7ba1\u7406\u7a97\u53e3\u914d\u7f6e\u3002"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4ee5\u4e0b\u8fde\u63a5\u5b57\u7b26\u4e32\u9002\u7528\u4e8e\u57fa\u672c\u7684 IP21 \u5b89\u88c5\uff1a",(0,i.jsx)(n.code,{children:'Driver={AspenTech SQLplus};HOST=<host>;PORT=10014"'})]}),"\n",(0,i.jsx)(r.ZP,{})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>o});var i=t(7294);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);