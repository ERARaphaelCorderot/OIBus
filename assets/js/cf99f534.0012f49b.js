"use strict";(self.webpackChunkdoc_oibus=self.webpackChunkdoc_oibus||[]).push([[5437],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=o.createContext({}),c=function(e){var t=o.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=c(e.components);return o.createElement(u.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=i,m=d["".concat(u,".").concat(h)]||d[h]||p[h]||r;return n?o.createElement(m,a(a({ref:t},l),{},{components:n})):o.createElement(m,a({ref:t},l))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=h;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[d]="string"==typeof e?e:i,a[1]=s;for(var c=2;c<r;c++)a[c]=n[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5297:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=n(7462),i=(n(7294),n(3905));const r={sidebar_position:2},a="OIBus to OIBus communication",s={unversionedId:"guide/advanced/oibus-to-oibus",id:"guide/advanced/oibus-to-oibus",title:"OIBus to OIBus communication",description:"Context",source:"@site/docs/guide/advanced/oibus-to-oibus.md",sourceDirName:"guide/advanced",slug:"/guide/advanced/oibus-to-oibus",permalink:"/docs/guide/advanced/oibus-to-oibus",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"guideSidebar",previous:{title:"OIBus security",permalink:"/docs/guide/advanced/oibus-security"},next:{title:"Data rate estimation and cache sizing",permalink:"/docs/guide/advanced/oibus-data-rate"}},u={},c=[{value:"Context",id:"context",level:2},{value:"Data",id:"data",level:2},{value:"Set up a North connector OIConnect in OIBus1",id:"set-up-a-north-connector-oiconnect-in-oibus1",level:3},{value:"Set up an External source in OIBus2",id:"set-up-an-external-source-in-oibus2",level:3},{value:"Logs",id:"logs",level:2},{value:"Loki through another OIBus",id:"loki-through-another-oibus",level:3}],l={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,o.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"oibus-to-oibus-communication"},"OIBus to OIBus communication"),(0,i.kt)("h2",{id:"context"},"Context"),(0,i.kt)("p",null,"Sometimes, PLCs or databases are only accessible in a private network. Let's call it the ",(0,i.kt)("strong",{parentName:"p"},"industrial network"),". This\nnetwork often exists inside or beside another network ; let's call it the ",(0,i.kt)("strong",{parentName:"p"},"office network"),".\nTwo options exist to access these data:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Allow connections to each data source from the OIBus machine (which is in the office network, outside the industrial\nnetwork) through the firewall"),(0,i.kt)("li",{parentName:"ul"},"Install one OIBus in the industrial network and one OIBus in the office network.Manage a single communication between\nthe two networks.")),(0,i.kt)("p",null,"The first option is acceptable if you have only one machine on which to install OIBus, but it involves more network\nsettings to manage and risk the exposing of your machines.\nThe second option is preferable. Indeed, the first OIBus in the industrial network - OIBus1 - can access the machine in\nthe same network, and send data to the office network through a single connection allowed in the firewall (from OIBus1\nto OIBus2)."),(0,i.kt)("p",null,"Let's see how to set up this communication."),(0,i.kt)("h2",{id:"data"},"Data"),(0,i.kt)("h3",{id:"set-up-a-north-connector-oiconnect-in-oibus1"},"Set up a North connector OIConnect in OIBus1"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/guide/north-connectors/oiconnect"},"OIConnect")," is very useful when one OIBus has no internet access (because it is\nisolated in an industrial network) but can communicate to another OIBus which is in another network with internet access."),(0,i.kt)("p",null,"The host could be something like ",(0,i.kt)("inlineCode",{parentName:"p"},"http://1.2.3.4:2223")," where 1.2.3.4 is the IP address and 2223 is the port of the\nsecond OIBus. Be careful to authorize remote connection in the second OIBus Engine settings in the\n",(0,i.kt)("a",{parentName:"p",href:"/docs/guide/engine/ip-filters"},"IP Filter section")," and to use the appropriate username and password (using Basic\nAuthentication). In this case, the OIBus username and password must be used (by default, admin and pass)."),(0,i.kt)("h3",{id:"set-up-an-external-source-in-oibus2"},"Set up an External source in OIBus2"),(0,i.kt)("p",null,"On the second OIBus, if you don't have declared an external source, the data will be discarded. Then, you must first\ndeclare an ",(0,i.kt)("a",{parentName:"p",href:"/docs/guide/engine/external-sources"},"external source"),". Its name must follow the syntax of the ",(0,i.kt)("a",{parentName:"p",href:"/docs/guide/north-connectors/oiconnect#query-param"},"name query\nparam"),", for example ",(0,i.kt)("inlineCode",{parentName:"p"},"MyOIBus:MyOIConnect"),"."),(0,i.kt)("p",null,"The North connector can now subscribe to this specific external source."),(0,i.kt)("h2",{id:"logs"},"Logs"),(0,i.kt)("h3",{id:"loki-through-another-oibus"},"Loki through another OIBus"),(0,i.kt)("p",null,"To send logs to OIBus2, go to the Engine page in the ",(0,i.kt)("em",{parentName:"p"},"Loki logs")," section, and specify the OIBus2 address in the\n",(0,i.kt)("strong",{parentName:"p"},"Host")," field and its associated endpoint. For example: ",(0,i.kt)("inlineCode",{parentName:"p"},"http://1.2.3.4:2223/logs"),".\nOIBus2 uses Basic Auth. Keep empty the token address field and fill the username and password used to connect to OIBus2. "),(0,i.kt)("p",null,"If the loki level set in OIBus1 is ",(0,i.kt)("strong",{parentName:"p"},"info"),", only info and above levels will be sent to OIBus2. In OIBus2, if the\nconsole and file levels are set to ",(0,i.kt)("strong",{parentName:"p"},"error"),", only error levels will be logged on the console and\nfile. However, if the loki level is set to ",(0,i.kt)("strong",{parentName:"p"},"info")," too, all the logs received from OIBus1 will be sent to this loki\nendpoint."))}p.isMDXComponent=!0}}]);